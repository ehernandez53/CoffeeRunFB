<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee Run Payment Form</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css">
    <style>
        form :focus:required:invalid {
            border-color: #a94442;
        }
    </style>
</head>

<body class="container">
    <header>
        <h1>Payment Form</h1>
    </header>
    <p>Required fields are followed by <strong><abbr title="required">*</abbr></strong>.</p>
    <section>
        <div class="panel panel-primary"></div>
        <div class="panel-body">
            <form data-payment="form" id="payment-form">
                <h2>Contact Information</h2>
                <fieldset>
                    <p>
                        <legend>Title</legend>
                        <div class="radio"><label><input type="radio" name="title" value="Mr."> Mr.</label></div>
                        <div class="radio"><label><input type="radio" name="title" value="Mrs."> Mrs.</label></div>
                        <div class="radio"><label><input type="radio" name="title" value="Ms."> Ms.</label></div>
                    </p>
                </fieldset>
                <p>
                    <label for="name">Name:<strong><abbr title="required">*</abbr></strong></label>
                    <input class="form-control" type="text" id="name" name="username">
                </p>
                <p>
                    <label for="mail">E-mail:<strong><abbr title="required">*</abbr></strong></label>
                    <input class="form-control" type="email" id="mail" name="usermail">
                </p>
                <p>
                    <label for="pwd">Password:<strong><abbr title="required">*</abbr></strong></label>
                    <input class="form-control" type="password" id="pwd" name="password">
                </p>

                <h2>Payment Information</h2>
                <p>
                    <div class="form-group">
                        <label for="card">Card type:</label>
                        <select class="form-control" id="card" name="usercard">
                            <option value="visa">Visa</option>
                            <option value="mc">Mastercard</option>
                            <option value="amex">American Express</option>
                        </select>
                    </div>
                </p>
                <p>
                    <div class="form-group">
                        <label for="number">Card number:<strong><abbr title="required">*</abbr></strong></label>
                        <input class="form-control" type="tel" id="number" name="cardnumber">
                    </div>
                </p>
                <p>
                    <div class="form-group">
                        <label for="date">Expiration date:<strong><abbr title="required">*</abbr></strong>
                            <em>(formatted as mm/dd/yyyy)</em></label>
                        <input class="form-control" type="date" id="date" name="expiration">
                    </div>
                </p>

                <p><button type="submit" class="btn btn-primary" onclick="printName()">Validate the payment</button></p>

                <!-- jQuery Modal Dialog Box-->
                <div id="ex1" class="modal">
                    <p>Thank you for your payment, <span id="full-name"></span>.</p>
                    <a href="#" rel="modal:close"
                        onclick="document.getElementById('ex1').style.display='none'">Close</a>
                </div>
            </form>
        </div>
        </div>
    </section>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!-- jQuery Modal -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
    <!-- FormHandler script -->
    <script src="scripts/formhandler.js" charset="utf-8"></script>

    <script>
        // Payment form submit handler
        var paymentForm = document.getElementById("payment-form");
        paymentForm.addEventListener("submit", (event) => {
            event.preventDefault();
            console.log('Inside submit handler for payment form.');
        });

        // Prints name and optional title
        function printName() {
            var title = $("input:radio[name=title]:checked").val();
            document.getElementById('ex1').style.display = 'block';
            if (title === undefined) {
                document.getElementById("full-name").innerHTML = document.getElementById('name').value;
            } else {
                document.getElementById("full-name").innerHTML = title + " " + document.getElementById('name').value;
            }
        };
    </script>
</body>

</html>